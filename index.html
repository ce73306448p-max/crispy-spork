<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>문예창작 × 생태·환경 — 창작으로 풀어내는 기후와 생태</title>
<link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#f6fff5; --card:#ffffff; --accent:#1f7a4c; --muted:#4a5568;
    --glass: rgba(255,255,255,0.85);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:'Gowun Dodum',sans-serif; color:#07251a;
    background: linear-gradient(180deg,#e9fbef,#d9f2e3);
    -webkit-font-smoothing:antialiased;
  }

  header{
    position:sticky; top:0; z-index:40;
    padding:14px 16px; backdrop-filter:blur(6px);
    background: linear-gradient(90deg,var(--glass), rgba(255,255,255,0.7));
    display:flex; align-items:center; gap:12px;
    border-bottom:1px solid rgba(0,0,0,0.05);
  }
  header h1{font-size:1.05rem;margin:0;color:var(--accent)}
  header p{margin:0;font-size:.82rem;color:var(--muted)}

  main{max-width:1100px;margin:18px auto;padding:12px;display:grid;gap:14px;
        grid-template-columns:1fr; }
  @media(min-width:1000px){ main{grid-template-columns: 1fr 420px;} }

  .card{
    background:var(--card); border-radius:12px; padding:14px;
    box-shadow:0 8px 28px rgba(2,6,23,0.06);
    overflow:hidden;
  }

  h2{margin:0 0 8px 0;color:var(--accent)}
  p.small{margin:0;color:var(--muted);font-size:.95rem}

  /* Analysis list */
  .list{display:grid;gap:8px}
  .item{border-left:4px solid rgba(31,122,76,0.12);padding:10px;border-radius:8px;background:linear-gradient(180deg,rgba(31,122,76,0.03),transparent)}
  .item strong{display:block;color:#134e33}

  /* Interactive writer tools */
  .row{display:flex;gap:10px;flex-wrap:wrap}
  textarea{width:100%;min-height:140px;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);resize:vertical}
  input[type="text"]{width:100%;padding:9px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)}

  .controls{display:flex;gap:8px;flex-wrap:wrap}
  .btn{background:var(--accent);color:white;border:none;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600}
  .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(31,122,76,0.12)}
  .hint{font-size:.9rem;color:var(--muted)}

  /* zine preview */
  .zine{border-radius:10px;padding:12px;background:linear-gradient(180deg,#fbfff9,#f0f8f1);min-height:140px;overflow:auto}
  .zine .story{padding:8px;border-bottom:1px dashed rgba(0,0,0,0.04)}
  .meta{font-size:.82rem;color:var(--muted)}

  /* found-text list */
  .found-list{max-height:160px;overflow:auto;padding:8px;border-radius:8px;background:#fff}

  footer{padding:18px;text-align:center;color:var(--muted);font-size:.9rem}
</style>
</head>
<body>
<header>
  <div style="flex:1">
    <h1>문예창작 × 생태·환경</h1>
    <p class="small">창작의 눈으로 기후·생태 문제를 탐구하고, 글로 공론화할 수 있도록 즉시 쓸 수 있는 툴을 제공합니다.</p>
  </div>
  <div style="display:flex;gap:8px;align-items:center">
    <button class="btn" id="saveAllBtn">로컬에 전체저장</button>
    <button class="btn ghost" id="loadAllBtn">저장 불러오기</button>
  </div>
</header>

<main>
  <!-- Left: analysis & tools -->
  <div style="display:grid;gap:12px">
    <section class="card">
      <h2>핵심 과제 — 문예창작학과 관점</h2>
      <div class="list" style="margin-top:8px">
        <div class="item">
          <strong>1. 감각의 상실</strong>
          <div class="small">현대 사회의 매개(디지털·도시화)가 자연 체험을 희석. 작가는 감각을 복원하는 서사를 만들어야 함.</div>
        </div>
        <div class="item">
          <strong>2. 서사의 단절</strong>
          <div class="small">기후·생태 문제는 장기적·복합적이라 단일화된 서사로 환원되기 쉬움. 다양하고 지역적인 목소리가 필요.</div>
        </div>
        <div class="item">
          <strong>3. 공감의 거리</strong>
          <div class="small">원인과 결과 사이의 시간이 멀어 공감 형성에 장애. 현재의 작은 실천과 연결된 서사가 필요.</div>
        </div>
        <div class="item">
          <strong>4. 언어의 무력감</strong>
          <div class="small">기후 담론은 기술적 수사로 포화. 창작은 시적 은유·미시서사로 감정의 문을 열어야 함.</div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>해결 아이디어 (창작 중심)</h2>
      <div style="display:grid;gap:10px;margin-top:8px">
        <div>
          <strong>아이디어 A — 감각 회복 워크숍 & 마이크로서사</strong>
          <p class="small">짧은 관찰 과제를 주고, 그 결과를 모두 모아 '지역 마이크로서사'를 제작. 참가자는 일상에서 한 감각을 고정밀도로 묘사.</p>
        </div>
        <div>
          <strong>아이디어 B — 파운드 텍스트 플랫폼 (Found Text Zine)</strong>
          <p class="small">사건·관찰·대화에서 건진 문장 일부들을 수집해 자동으로 '파운드시'를 생성하고, 공동으로 편집해 전시/배포.</p>
        </div>
        <div>
          <strong>아이디어 C — 기후 공감 스토리맵</strong>
          <p class="small">작가들이 지역별 짧은 이야기(200-400자)를 올려 지도식으로 보여주고, 방문자는 지역 이야기들을 따라 걷게 만드는 웹 리터러시 도구.</p>
        </div>
      </div>
    </section>

    <!-- Interactive: prompt generator -->
    <section class="card">
      <h2>도구 1 — 창작 프롬프트 생성기</h2>
      <p class="hint">문예창작 특화 프롬프트: 조건(장르/길이/감각) 선택 → 즉시 초안 생성</p>
      <div style="display:grid;gap:8px;margin-top:8px">
        <div class="row">
          <select id="genre" style="padding:8px;border-radius:8px">
            <option value="시">시</option>
            <option value="단편">단편</option>
            <option value="산문">산문 에세이</option>
            <option value="편지">편지 형식</option>
          </select>
          <select id="focus" style="padding:8px;border-radius:8px">
            <option value="감각">감각 묘사</option>
            <option value="회상">회상/가족</option>
            <option value="미래">미래 예언</option>
            <option value="현장">현장 리포트</option>
          </select>
          <select id="length" style="padding:8px;border-radius:8px">
            <option value="short">짧음 (50-120자)</option>
            <option value="medium" selected>중간 (120-400자)</option>
            <option value="long">김 (400-1200자)</option>
          </select>
        </div>

        <div style="display:grid;gap:8px">
          <label>시작키워드 (옵션)</label>
          <input id="startWord" type="text" placeholder="예: 밤, 빗줄기, 옥상">
        </div>

        <div class="controls" style="margin-top:6px">
          <button class="btn" id="genPrompt">프롬프트 생성</button>
          <button class="btn ghost" id="clearPrompt">지우기</button>
        </div>

        <textarea id="promptOut" placeholder="생성된 프롬프트가 이곳에 표시됩니다."></textarea>
        <div style="display:flex;gap:8px">
          <button class="btn" id="draftFromPrompt">프롬프트로 초안 만들기</button>
          <button class="btn ghost" id="copyPrompt">복사</button>
        </div>
      </div>
    </section>

    <!-- Interactive: found text collector -->
    <section class="card">
      <h2>도구 2 — 파운드 텍스트 수집기 & 즉석 파운드詩</h2>
      <p class="hint">짧은 관찰문장이나 대사(10~80자)를 수집하여 즉시 'found poem'을 생성합니다.</p>

      <div style="display:grid;gap:8px;margin-top:8px">
        <input id="foundInput" type="text" placeholder="관찰문장/대사 입력 (짧게)" />
        <div class="row">
          <button class="btn" id="addFound">수집하기</button>
          <button class="btn ghost" id="clearFound">모두 지우기</button>
          <div style="margin-left:auto" class="hint">수집된 문장: <span id="foundCount">0</span></div>
        </div>

        <div class="found-list" id="foundList" aria-live="polite"></div>

        <div class="controls">
          <button class="btn" id="makePoem">파운드시 생성</button>
          <button class="btn ghost" id="exportFound">TXT 내보내기</button>
        </div>

        <textarea id="poemOut" placeholder="생성된 시가 여기에 표시됩니다."></textarea>
      </div>
    </section>

    <!-- Draft & zine -->
    <section class="card">
      <h2>도구 3 — 초안 작성 · 로컬 zine 제작</h2>
      <p class="hint">초안 작성 → 로컬 zine에 '발행'하면 오른쪽 컬럼 zine에 실립니다. (LocalStorage 기반)</p>
      <textarea id="draftArea" placeholder="여기에 초안을 씁니다... (저장 버튼으로 로컬에 저장)"></textarea>
      <div class="row" style="margin-top:8px">
        <button class="btn" id="saveDraft">초안 저장</button>
        <button class="btn" id="publishDraft">zine에 발행</button>
        <button class="btn ghost" id="downloadDraft">다운로드 (.txt)</button>
      </div>
      <div style="margin-top:10px" class="hint">최근 저장: <span id="draftSavedAt">—</span></div>
    </section>
  </div>

  <!-- Right: zine preview & extras -->
  <aside style="display:grid;gap:12px">
    <section class="card">
      <h2>작품집(로컬 zine) 미리보기</h2>
      <div class="zine" id="zinePreview">
        <div class="hint">아직 발행된 글이 없습니다.</div>
      </div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button class="btn" id="exportZine">Zine 다운로드 (.txt)</button>
        <button class="btn ghost" id="clearZine">zine 초기화</button>
      </div>
    </section>

    <section class="card">
      <h2>작가 워크플로 가이드</h2>
      <ol style="padding-left:18px;color:var(--muted);font-size:.95rem">
        <li>프롬프트를 생성하거나, 현장 관찰을 통해 문장을 모은다.</li>
        <li>파운드 텍스트로 즉석 파운드시를 만들고, 영감을 받은 문장으로 초안 작성.</li>
        <li>초안을 저장한 뒤, 마음에 들면 zine에 발행하여 전시한다.</li>
      </ol>
    </section>

    <section class="card">
      <h2>메타데이터</h2>
      <div class="meta">저장 방식: LocalStorage (브라우저 내부)</div>
      <div class="meta">파일 내보내기: .txt</div>
      <div class="meta" style="margin-top:6px">권장: GitHub Pages에 올려 팀과 공유</div>
    </section>
  </aside>
</main>

<footer>© 2025 문예창작 × 생태웹툴 — 로컬 베타 버전</footer>

<script>
/* ---------------------------
   Utility helpers
   --------------------------- */
const $ = (s) => document.querySelector(s);
const $$ = (s) => document.querySelectorAll(s);

function nowISO(){ return new Date().toISOString(); }
function downloadText(filename, text){
  const a = document.createElement('a');
  a.href = URL.createObjectURL(new Blob([text], {type:'text/plain;charset=utf-8'}));
  a.download = filename;
  document.body.appendChild(a); a.click();
  setTimeout(()=>{ URL.revokeObjectURL(a.href); a.remove(); }, 500);
}

/* ---------------------------
   Prompt generator (lightweight heuristic)
   --------------------------- */
const genreEl = $('#genre'), focusEl = $('#focus'), lengthEl = $('#length'), startWordEl = $('#startWord');
const promptOut = $('#promptOut');

const templates = {
  '시': [
    "다음 단어를 중심으로 3행 내외의 이미지 시를 써라: {{start}} — 감각을 하나 골라 그것을 확장하라.",
    "비교적 짧은 이미지 시: {{start}}에서 들려오는 소리, 피부에 닿는 온도, 냄새를 묘사하라."
  ],
  '단편': [
    "{{start}}로 시작하는 장면을 제시하라. 주요 인물은 자연과 갈등하는 사람이 아니라 자연의 일부인 사람이다. 분량: {{length}}",
    "하나의 사소한 관찰(예: 눌어붙은 냄비, 마른 풀 한 줌)으로 이야기를 시작해 인물의 지난 날들을 서서히 드러내라."
  ],
  '산문': [
    "현장 에세이: 한 장소를 10분 관찰한 뒤, 그 관찰을 시간 순으로 묘사하라. 감각 중심으로 쓰되 결론에서 개인적 회고로 마무리.",
    "개인적 기후 기억: 어린 시절의 기후 관련 기억을 떠올리고, 그 장면을 현재의 풍경과 병치해라."
  ],
  '편지': [
    "자연에게 보내는 편지: 한 문장으로 문제 제기, 두 문단으로 감정 서술, 마무리 한 줄의 다짐.",
    "{{start}}에게 보내는 편지 형식으로, 당신이 잃어버린 계절을 묘사하라."
  ]
};

$('#genPrompt').addEventListener('click', ()=>{
  const genre = genreEl.value;
  const focus = focusEl.value;
  const length = lengthEl.value;
  const start = startWordEl.value.trim() || (['밤','바람','빗물','창문','옥상'][Math.floor(Math.random()*5)]);
  const tlist = templates[genre] || templates['산문'];
  const t = tlist[Math.floor(Math.random()*tlist.length)];
  // length token
  const lenLabel = (length==='short') ? '짧음 (50~120자)' : (length==='medium') ? '중간 (120~400자)' : '김 (400~1200자)';
  let out = t.replace('{{start}}', start).replace('{{length}}', lenLabel);
  // inject focus suggestion
  if(focus==='감각') out += " 감각(소리/온도/촉감/냄새) 중 하나를 골라 집중적으로 묘사하라.";
  else if(focus==='회상') out += " 개인의 기억과 가족 서사를 결합해 작은 서사를 구성하라.";
  else if(focus==='미래') out += " 미래의 한 장면을 상상하고, 그 미래의 자연을 한 문장으로 요약하라.";
  else if(focus==='현장') out += " 현장 리포트 스타일로, 관찰된 것과 인터뷰(상상)를 섞어 기록하라.";
  promptOut.value = out;
});

$('#clearPrompt').addEventListener('click', ()=> promptOut.value = '');

$('#copyPrompt').addEventListener('click', ()=>{
  navigator.clipboard?.writeText(promptOut.value).then(()=> alert('프롬프트 복사 완료'));
});

$('#draftFromPrompt').addEventListener('click', ()=>{
  const p = promptOut.value.trim();
  if(!p) return alert('프롬프트가 비어 있습니다.');
  $('#draftArea').value = (p + "\n\n" + "— 초안 시작 —\n");
  window.scrollTo({top:0,behavior:'smooth'});
});

/* ---------------------------
   Found text collector
   --------------------------- */
let foundArr = JSON.parse(localStorage.getItem('found_texts') || '[]');
const foundListEl = $('#foundList'), foundCountEl = $('#foundCount'), foundInput = $('#foundInput'), poemOut = $('#poemOut');

function renderFound(){
  foundListEl.innerHTML = '';
  if(foundArr.length===0){ foundListEl.innerHTML = '<div class="hint">아직 수집된 문장이 없습니다.</div>'; }
  else{
    foundArr.forEach((t,i)=>{
      const d = document.createElement('div'); d.style.padding='6px 0'; d.style.borderBottom='1px solid rgba(0,0,0,0.03)';
      d.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center"><div style="flex:1">${escapeHtml(t)}</div>
      <div style="margin-left:8px"><button class="btn ghost" data-i="${i}">삭제</button></div></div>`;
      foundListEl.appendChild(d);
    });
  }
  foundCountEl.innerText = foundArr.length;
}
function escapeHtml(s){ return (s+'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

$('#addFound').addEventListener('click', ()=>{
  const v = foundInput.value.trim();
  if(!v) return alert('문장을 입력하세요.');
  if(v.length > 180) return alert('문장이 너무 깁니다 (180자 제한).');
  foundArr.push(v);
  localStorage.setItem('found_texts', JSON.stringify(foundArr));
  foundInput.value = '';
  renderFound();
});
$('#clearFound').addEventListener('click', ()=>{ if(confirm('모든 수집 문장을 삭제할까요?')){ foundArr=[]; localStorage.removeItem('found_texts'); renderFound(); }});
foundListEl.addEventListener('click', (ev)=>{
  const b = ev.target.closest('button[data-i]');
  if(!b) return;
  const i = Number(b.getAttribute('data-i'));
  foundArr.splice(i,1); localStorage.setItem('found_texts', JSON.stringify(foundArr)); renderFound();
});

/* Make poem: simple rules:
   - shuffle lines, intersperse with short connective fragments,
   - optional repetition
*/
$('#makePoem').addEventListener('click', ()=>{
  if(foundArr.length===0) return alert('먼저 문장을 수집하세요.');
  // sample and shuffle
  const arr = shuffleArray(foundArr.slice());
  const pick = arr.slice(0, Math.min(10, arr.length));
  // intersperse connectors
  const connectors = ['그리고', '그러나', '그때', '때로는', '어쩌면', '여전히'];
  const lines = [];
  pick.forEach((ln,i)=>{
    lines.push(ln);
    if(Math.random() > 0.5) lines.push(connectors[Math.floor(Math.random()*connectors.length)]);
  });
  poemOut.value = lines.join('\n');
});
function shuffleArray(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }

$('#exportFound').addEventListener('click', ()=>{
  const text = foundArr.join('\n');
  if(!text) return alert('수집된 문장이 없습니다.');
  downloadText('found_texts.txt', text);
});

/* ---------------------------
   Draft / zine storage & publishing
   --------------------------- */
const draftArea = $('#draftArea'), draftSavedAt = $('#draftSavedAt');
const zinePreview = $('#zinePreview');

function saveDraftLocal(){
  const content = draftArea.value.trim();
  if(!content) return alert('초안이 비어 있습니다.');
  const obj = {content, savedAt: nowISO()};
  localStorage.setItem('draft_latest', JSON.stringify(obj));
  draftSavedAt.innerText = new Date(obj.savedAt).toLocaleString();
  alert('초안이 저장되었습니다 (로컬).');
}
$('#saveDraft').addEventListener('click', saveDraftLocal);

function loadDraftLocal(){
  const s = localStorage.getItem('draft_latest');
  if(!s) return;
  try{
    const obj = JSON.parse(s);
    draftArea.value = obj.content;
    draftSavedAt.innerText = new Date(obj.savedAt).toLocaleString();
  }catch(e){}
}
loadDraftLocal();

$('#downloadDraft').addEventListener('click', ()=>{
  const c = draftArea.value.trim();
  if(!c) return alert('다운로드할 초안이 없습니다.');
  downloadText('draft_' + (new Date()).toISOString().slice(0,10) + '.txt', c);
});

/* zine: array of {title,content,at} */
let zineArr = JSON.parse(localStorage.getItem('local_zine') || '[]');
function renderZine(){
  zinePreview.innerHTML = '';
  if(!zineArr || zineArr.length===0){ zinePreview.innerHTML = '<div class="hint">아직 발행된 글이 없습니다.</div>'; return; }
  zineArr.slice().reverse().forEach((it, idx)=>{
    const d = document.createElement('div'); d.className = 'story';
    d.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center">
      <strong>${escapeHtml(it.title || ('무제 ' + (zineArr.length - idx)))}</strong>
      <div class="meta">${new Date(it.at).toLocaleString()}</div></div>
      <div style="margin-top:6px;white-space:pre-wrap">${escapeHtml(it.content)}</div>`;
    zinePreview.appendChild(d);
  });
}
renderZine();

$('#publishDraft').addEventListener('click', ()=>{
  const c = draftArea.value.trim();
  if(!c) return alert('초안이 비어 있습니다.');
  const title = prompt('작품 제목을 입력하세요 (생략 시 무제)');
  const doc = {title: title || ('무제'), content: c, at: nowISO()};
  zineArr.push(doc);
  localStorage.setItem('local_zine', JSON.stringify(zineArr));
  renderZine();
  alert('zine에 발행되었습니다 (로컬).');
});

$('#clearZine').addEventListener('click', ()=>{
  if(confirm('zine을 초기화 하시겠습니까? (복구 불가)')){
    zineArr = []; localStorage.removeItem('local_zine');
    renderZine();
  }
});
$('#exportZine').addEventListener('click', ()=>{
  if(!zineArr || zineArr.length===0) return alert('발행된 글이 없습니다.');
  const t = zineArr.map(it=> `# ${it.title}\n\n${it.content}\n\n-- ${new Date(it.at).toLocaleString()} --\n\n`).join('\n\n');
  downloadText('local_zine.txt', t);
});

/* ---------------------------
   Save/Load app snapshot (local)
   --------------------------- */
$('#saveAllBtn').addEventListener('click', ()=>{
  const state = {
    foundArr, zineArr, draftLatest: (localStorage.getItem('draft_latest') ? JSON.parse(localStorage.getItem('draft_latest')) : null),
    savedAt: nowISO()
  };
  localStorage.setItem('creative_ecology_snapshot', JSON.stringify(state));
  alert('앱 상태가 로컬에 저장되었습니다.');
});

$('#loadAllBtn').addEventListener('click', ()=>{
  const s = localStorage.getItem('creative_ecology_snapshot');
  if(!s) return alert('저장된 스냅샷이 없습니다.');
  if(!confirm('저장된 스냅샷을 불러오면 현재 편집 내용이 덮어씌워질 수 있습니다. 계속하시겠어요?')) return;
  const obj = JSON.parse(s);
  foundArr = obj.foundArr || [];
  zineArr = obj.zineArr || [];
  if(obj.draftLatest) localStorage.setItem('draft_latest', JSON.stringify(obj.draftLatest));
  renderFound(); renderZine(); loadDraftLocal();
  alert('스냅샷 불러오기 완료');
});

/* ---------------------------
   Init
   --------------------------- */
(function init(){
  renderFound();
  renderZine();
  // load draft if exists
  loadDraftLocal();
})();
</script>
</body>
</html>
